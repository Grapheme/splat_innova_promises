<?
#$create_title = "Редактировать " . $module['entity_name'] . ":";
#$edit_title   = "Добавить " . $module['entity_name'] . ":";
#$create_title = "Изменить страницу:";
#$edit_title   = "Новая страница:";

#$url        = @$element->id ? URL::route($module['entity'].'.update', array('id' => $element->id)) : URL::route($module['entity'].'.store', array());
$url        = action($module['class'].'@postAjaxPagesSaveBlock');
#$method     = @$element->id ? 'PUT' : 'POST';
$method     = 'POST';
#$form_title = @$element->id ? $create_title : $edit_title;
?>

<?
#Helper::ta($element);
?>

<?php echo Form::model($element, array('url' => $url, 'class' => 'smart-form2', 'id' => 'block-form', 'role' => 'form', 'method' => $method)); ?>

<?php if($element->id): ?>
<input type="hidden" name="id" value="<?php echo $element->id; ?>" />
<?php endif; ?>
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                &times;
            </button>
            <h4 class="modal-title" id="myModalLabel">
                Редактировать блок
            </h4>
        </div>
        <div class="modal-body">

            <div class="row">
                <div class="col-md-12">

                    <div class="form-group">
                        <label class="control-label">
                            Название
                        </label>
                        <input type="text" class="form-control" placeholder="Название блока" name="name" value="<?php echo $element->name; ?>" required />
                    </div>

                    <fieldset class="row">

                        <section class="col col-lg-6">
                            <label class="control-label">
                                Системное имя
                            </label>
                            <?php /*
                            <textarea class="form-control" placeholder="Системное имя" rows="2" name="slug"><?php echo $element->slug; ?></textarea>
                            */ ?>
                            <?php echo Form::text('slug', null, array('class' => 'form-control')); ?>

                        </section>

                        <section class="col col-lg-6">
                            <label class="control-label">
                                Шаблон блока
                            </label>
                            <?php echo Form::select('template', array('Выберите...')+$templates, null, array('class' => 'form-control')); ?>

                        </section>

                    </fieldset>

                </div>
            </div>

            <?php if(count($locales) > 1): ?>

            <div class="widget-body" style="padding-top:15px">
                <ul id="myTab2" class="nav nav-tabs bordered" role="tablist">
                    <? $i = 0; ?>
                    <?php foreach($locales as $locale_sign => $locale_name): ?>
                    <li class="<?php echo !$i++ ? 'active' : ''; ?>">
                        <a href="#block_meta_<?php echo $locale_sign; ?>" class="modaltablink" data-toggle="tab">
                            <?php echo $locale_name; ?>

                        </a>
                    </li>
                    <?php endforeach; ?>
                </ul>
                <div id="myTabContent2" class="tab-content padding-10">
                    <? $i = 0; ?>
                    <?php foreach($locales as $locale_sign => $locale_name): ?>
                    <div class="tab-pane fade<?php echo !$i++ ? ' active in' : ''; ?>" id="block_meta_<?php echo $locale_sign; ?>">

                        <?php echo $__env->make($module['tpl'].'_block_meta', compact('locale_sign', 'locale_name', 'templates', 'element'), array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

                    </div>
                    <?php endforeach; ?>
                </div>
            </div>

            <?php else: ?>

                <?php foreach($locales as $locale_sign => $locale_name): ?>
                    <?php echo $__env->make($module['tpl'].'_block_meta', compact('locale_sign', 'locale_name', 'templates', 'element'), array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                <?php endforeach; ?>

            <?php endif; ?>

        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">
                Закрыть
            </button>
            <button type="submit" class="btn btn-primary btn-form-submit">
                Сохранить
            </button>
        </div>
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
<?php echo Form::close(); ?>